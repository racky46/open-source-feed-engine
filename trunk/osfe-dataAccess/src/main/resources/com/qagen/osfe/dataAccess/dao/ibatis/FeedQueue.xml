<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//iBATIS.com//DTD SQL Map 2.0//EN"
  "http://ibatis.apache.org/dtd/sql-map-2.dtd">

<sqlMap namespace="FeedQueue">

  <typeAlias alias="MonitorQueue" type="com.qagen.osfe.dataAccess.param.MonitorQueueParam"/>
  <typeAlias alias="FeedQueue" type="com.qagen.osfe.dataAccess.vo.FeedQueue"/>

  <resultMap id="resultMap" class="FeedQueue">
    <result property="feedQueueId" column="feed_queue_id"/>
    <result property="entryTime" column="entry_time"/>
    <result property="feedFileName" column="feed_file_name"/>
    <result property="feed" column="feed_id" select="Feed.findByPrimaryId"/>
    <result property="feedQueueType" column="feed_queue_id" select="FeedQueueType.findByPrimaryId"/>
    <result property="feedQueueState" column="feed_queue_state_id" select="FeedQueueState.findByPrimaryId"/>
    <result property="feedMonitor" column="feed_monitor_id" select="FeedMonitor.findByPrimaryId"/>
  </resultMap>

  <insert id="insert" parameterClass="FeedQueue">
    insert into t_feed_queue (
      entry_time,
      feed_file_name,
      feed_id,
      feed_queue_type_id,
      feed_queue_state_id,
      feed_monitor_id
    ) values (
      #entryTime#,
      #feedFileName#,
      #feed.feedId#,
      #feedQueueType.feedQueueTypeId#,
      #feedQueueState.feedQueueStateId#,
      #feedMonitor.feedMonitorId#
    )

    <selectKey resultClass="int" keyProperty="feedQueueId">
      select @@identity as feed_queue_id
    </selectKey>
  </insert>

  <update id="update" parameterClass="FeedQueue">
    update t_feed_queue set
      feed_queue_id = #feedQueueId#,
      entry_time = #entryTime#,
      feed_file_name = #feedFileName#,
      feed_id = #feed.feedId#,
      feed_queue_type_id = #feedQueueType.feedQueueTypeId#,
      feed_queue_state_id = #feedQueueState.feedQueueStateId#,
      feed_monitor_id = #feedMonitor.feedMonitorId#
    where feed_queue_id = #feedQueueId#
  </update>

  <delete id="delete" parameterClass="FeedQueue">
    delete from t_feed_queue where feed_queue_id = #feedQueueId#
  </delete>

  <delete id="deleteAll" parameterClass="string">
    delete from t_feed_queue where feed_monitor_id = #value#
  </delete>

  <delete id="deleteByMonitorIdQueueId" parameterClass="MonitorQueue">
    delete from t_feed_queue
    where feed_monitor_id = #monitorId#
    and feed_queue_id = #queueId#
  </delete>

  <select id="findByPrimaryId" parameterClass="int" resultMap="FeedQueue.resultMap">
    select * from t_feed_queue where feed_queue_id = #value#
  </select>

  <select id="findByMonitorIdQueueId" parameterClass="MonitorQueue" resultMap="FeedQueue.resultMap">
    select * from t_feed_queue
    where feed_monitor_id = #monitorId#
    and feed_queue_id = #queueId#
  </select>

  <select id="findAll" parameterClass="string" resultMap="FeedQueue.resultMap">
    select * from t_feed_queue where monitor_id = #value#
  </select>

</sqlMap>